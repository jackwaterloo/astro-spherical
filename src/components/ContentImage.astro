---
import { Image } from "astro:assets";
import { cn } from "@lib/utils";
import type { ImageMetadata } from "astro";

interface Props {
  src: ImageMetadata;
  alt: string;
  class?: string;
  caption?: string;
  width?: number;
  height?: number;
}

const { src, alt, class: className, caption, width, height } = Astro.props;

const imageProps = {
  src,
  alt,
  class: cn("max-w-full max-h-[625px] h-auto w-auto rounded-lg", className),
  ...(width && { width }),
  ...(height && { height }),
};
---

<figure class={cn("my-6", caption && "space-y-2")}>
  <Image {...imageProps} />
  {
    caption && (
      <figcaption class="text-center text-sm text-neutral-600 dark:text-neutral-400">
        {caption}
      </figcaption>
    )
  }
</figure>
